<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private IoT Data Management</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Private IoT Data Management</h1>
            <p>Secure device data with FHE encryption</p>
            <div class="wallet-section">
                <button id="connectWallet" class="btn-primary">Connect Wallet</button>
                <div id="walletInfo" class="wallet-info hidden">
                    <span id="walletAddress"></span>
                    <span id="networkStatus"></span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="tabs">
                <button class="tab-button active" onclick="showTab('devices')">My Devices</button>
                <button class="tab-button" onclick="showTab('register')">Register Device</button>
                <button class="tab-button" onclick="showTab('data')">Submit Data</button>
                <button class="tab-button" onclick="showTab('thresholds')">Set Thresholds</button>
                <button class="tab-button" onclick="showTab('records')">Data Records</button>
            </div>

            <div id="devices" class="tab-content active">
                <h2>My IoT Devices</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Devices</h3>
                        <span id="totalDevices" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Active Devices</h3>
                        <span id="activeDevices" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Data Records</h3>
                        <span id="totalRecords" class="stat-number">0</span>
                    </div>
                </div>
                <div id="devicesList" class="devices-list"></div>
            </div>

            <div id="register" class="tab-content">
                <h2>Register New Device</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label for="deviceId">Device ID:</label>
                        <input type="text" id="deviceId" placeholder="Enter unique device identifier" required>
                    </div>
                    <button id="registerDevice" class="btn-primary">Register Device</button>
                </div>
            </div>

            <div id="data" class="tab-content">
                <h2>Submit Device Data</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label for="dataDeviceId">Device ID:</label>
                        <input type="text" id="dataDeviceId" placeholder="Enter device ID" required>
                    </div>
                    <div class="form-group">
                        <label for="dataValue">Data Value:</label>
                        <input type="number" id="dataValue" placeholder="Enter sensor value" required>
                    </div>
                    <div class="form-group">
                        <label for="dataType">Data Type:</label>
                        <select id="dataType" required>
                            <option value="0">Temperature</option>
                            <option value="1">Humidity</option>
                            <option value="2">Pressure</option>
                            <option value="3">Motion</option>
                            <option value="4">Light</option>
                            <option value="5">Sound</option>
                        </select>
                    </div>
                    <button id="submitData" class="btn-primary">Submit Data</button>
                </div>
            </div>

            <div id="thresholds" class="tab-content">
                <h2>Set Data Thresholds</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label for="thresholdDeviceId">Device ID:</label>
                        <input type="text" id="thresholdDeviceId" placeholder="Enter device ID" required>
                    </div>
                    <div class="form-group">
                        <label for="thresholdDataType">Data Type:</label>
                        <select id="thresholdDataType" required>
                            <option value="0">Temperature</option>
                            <option value="1">Humidity</option>
                            <option value="2">Pressure</option>
                            <option value="3">Motion</option>
                            <option value="4">Light</option>
                            <option value="5">Sound</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="minValue">Minimum Value:</label>
                        <input type="number" id="minValue" placeholder="Enter minimum threshold" required>
                    </div>
                    <div class="form-group">
                        <label for="maxValue">Maximum Value:</label>
                        <input type="number" id="maxValue" placeholder="Enter maximum threshold" required>
                    </div>
                    <button id="setThreshold" class="btn-primary">Set Threshold</button>
                </div>
            </div>

            <div id="records" class="tab-content">
                <h2>Data Records</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label for="searchDeviceId">Filter by Device ID:</label>
                        <input type="text" id="searchDeviceId" placeholder="Enter device ID to filter">
                    </div>
                    <button id="loadRecords" class="btn-secondary">Load Records</button>
                </div>
                <div id="recordsList" class="records-list"></div>
            </div>
        </main>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Processing transaction...</p>
        </div>

        <div id="notification" class="notification hidden">
            <span id="notificationMessage"></span>
            <button onclick="hideNotification()">&times;</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="contract.js"></script>
    <script src="app.js"></script>
</body>
</html>